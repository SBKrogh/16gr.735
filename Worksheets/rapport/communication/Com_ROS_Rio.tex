%\section{Communication between the sbRIO and ROS}\label{sec:com_ROS_sbRIO}


In the former system setup the sbRIO board and the computer running ROS are communicating through an ethernet cable using the TCP/IP protocol.

The speed of the communication between the sbRIO board and the computer running ROS is set to 100 Hz. This was done as a trade off between being fast and for avoiding bugs which where bandwidth related\cite{Chris_Surgical}.

\section{JavaScript Object Notation}\label{subsec:JSON}
In the former system the data exchanged through the TCP/IP connection follow the \gls{JSON} format. \gls{JSON} is a "\textit{text format for the serialization of structured data}"\cite{JSON_IETF} which mean that it defines a syntax and a structure that can be used to exchange data. The structure used by \gls{JSON} associate a name to a value. The value can be a number, string, array, object, boolean or null. It is also worth mentioning that a \gls{JSON} file only contains characters, if a decimal number is to be sent, each digit will be represented by a character instead of having the bitcode representation of a double or a float for example. The former message from the sbRIO to ROS that would contain the information regarding the motors for the Endowrist followed this structure:

\begin{lstlisting}[language=C]
"p4_primary":{
	"position":[0,0.00013089955609757453203,-0.00012667699775192886591,0],
	"velocity":[0,0.0015707947313785552979,0.0015707947313785552979,0],
	"effort":[-0.48593282699584960938,-0.31835031509399414063,
	-0.36891269683837890625,-0.39591121673583984375]
	}
\end{lstlisting}

As it can be seen in this example, the structure associate another structure to the element called "p4\_primary" which designates the Endowrist. This second structure contains arrays of positions, velocities and efforts with values for each of the four motors controlling the Endowrist.

The communication that was implemented is described in \secref{sec:ros} and \secref{sec:sbrio}