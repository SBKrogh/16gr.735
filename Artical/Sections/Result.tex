\section{Results}

\subsection{Communication}

As shown in TABLE \ref{tab:UDPMeasurements}, when the frequency increases from 100 Hz to 500 Hz, so does\todo{do?} the jitter and packet loss. However when the refresh rate is increased to its maximum value the jitter sharply decreases while the packet loss increases significantly.

 % It was stated before that the requirements for our system was to get to at least 550 Hz and to reach 1000Hz if possible. As shown in Table \ref{tab:UDPMeasurements}, the connection can go up to almost 1000Hz using UDP which fulfills the requirements. However, the jitter should not be neglected as the frequency get closer to 1000Hz the jitter increases and becomes high compared to the period and may cause unexpected behavior in real time operation. It is though that as the period become smaller, the system becomes more sensitive to the preemption of other processes.
\begin{center}
  $\begin{tabular}{|c|c|c|c|c|c|}
    \hline
    \text{Frequency (Hz)} & \text{delay (ms)} & \text{Jitter ($\mu$s)} & \text{Packet loss (\%)}\\
    \hline
    99 & 10.1 & 4.66E-2 & 0 \\
    \hline
    474 & 2.1 & 5.51E-2 & 0.2 \\
    \hline
    638 & 1.6 & 1.16E-2 & 1.2 \\
    \hline
  \end{tabular}$
  \captionof{table}{Measurements of the UDP performances}
  \label{tab:UDPMeasurements}
\end{center}
The goal of 1000 Hz could not be reached when running the entire system. However, as the original communication could not exceed the refresh rate of 100Hz a significant improvement is to be noted.

\begin{figure}[h]
  \input{../Worksheets/rapport/pictures/feedback_measurements}
  \caption{Measurements of the response of the force feedback for the clamp}
\end{figure}


% \begin{figure}[h]
%   \centering
%   \begin{subfigure}{.45\linewidth}
%     \centering
%     \input{../Worksheets/rapport/pictures/10ms}
%     \caption{delay = 10ms}
%     \label{fig:10ms}
%   \end{subfigure}
%   \begin{subfigure}{.45\linewidth}
%     \centering
%     \input{../Worksheets/rapport/pictures/0ms}
%     \caption{delay = 0ms}
%     \label{fig:0ms}
%   \end{subfigure}
% \caption{distribution of the RTT delay for different parameters}
% \label{fig:histograms}
% \end{figure}





